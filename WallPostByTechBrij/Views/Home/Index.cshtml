@model IEnumerable<WallPostByTechBrij.Models.UserProfile>
@{
    ViewBag.Title = "Wall";
   // ViewBag.UserIndex = 3;
}


<div class="content-wrapper">

    <div class="float-left" style="background-color:blanchedalmond;width: 650px">
        <div class="publishContainer" style="width: 650px">
            <textarea class="msgTextArea" id="txtMessage" data-bind="value: newMessage, jqAutoresize: {}" style="height:3em;" placeholder="What's on your mind?"></textarea>
            <input type="button" value="Post" id="btnShare" data-bind="click: addPost">
        </div>
        <p class="error" style="color:red;width: 650px" data-bind="text:error"></p>
        <div class="notification" data-bind="visible: newPosts().length > 0"><a data-bind="    click: loadNewPosts"> <span data-bind="    text: newPosts().length"></span> new post(s)</a></div>
        
        
        
        <ul id="msgHolder"style="width: 650px" data-bind="foreach: posts">
            <li class="postHolder">
                <div> <a data-bind="attr: { href: 'http://localhost:1268//Home/UsersInfo?Id=' +PostedBy }"><img data-bind="attr: { src: PostedByAvatar }"><span data-bind="text: PostedByName"></span></a>: <span data-bind="    html: Message"></span></div>
                <div class="postFooter">


                    <a data-bind="click: loadAllLikers">
                        <span data-bind="    text: numberOfLikes"></span> Liked
                    </a>


                    <br />
                    <span class="timeago" data-bind="text: PostedDate"></span>&nbsp;


                    <a href="#" data-bind="click: addLike">Like or DisLike the Post</a>&nbsp;
                    <a class="notification" data-bind="click:loadNewLikes,visible:NewLikes().length>0">
                        <span data-bind=" text: NewLikes().length"></span>  new like notification
                    </a>&nbsp;






                    <a class="notification" data-bind="click: loadNewComments, visible: NewComments().length > 0">
                        <span data-bind="    text: NewComments().length"></span> new comment notification
                    </a>


                    <div class="commentSection" style="width: 500px">
                        <ul data-bind="foreach: PostComments">
                            <li class="commentHolder">
                                <div><a data-bind="attr: { href: 'http://localhost:1268//Home/UsersInfo?Id=' +CommentedBy }"><img data-bind="attr: { src: CommentedByAvatar }"><span data-bind="text: CommentedByName"></span></a>: <span data-bind="    html: Message"></span></div>
                                <div class="commentFooter"> <span class="timeago" data-bind="text: CommentedDate"></span>&nbsp;</div>
                            </li>
                        </ul>
                        <div style="display: block" class="publishComment">
                            <textarea class="commentTextArea" data-bind="value: newCommentMessage, jqAutoresize: {}" placeholder="write a comment..."></textarea>
                            <input type="button" value="Comment" class="btnComment" data-bind="click: addComment" />
                        </div>
                    </div>
                </div>
            </li>
        </ul>



    </div>

    <div class="float-right" style="background-color: blanchedalmond;width: 240px">
      

    @Html.Partial("_Notification",Model)

    </div>
    
</div>

    @section scripts{
        @Scripts.Render("~/bundles/jqueryval")
        <!--Reference the SignalR library. -->
        <script src="~/Scripts/jquery.signalR-1.1.2.js"></script>
        <!--Reference the autogenerated SignalR hub script. -->
        <script src="~/signalr/hubs"></script>

        <script src="~/Scripts/jquery.autosize-min.js"></script>
        <script src="~/Scripts/jquery.timeago.js"></script>
        <script src="~/Scripts/knockout-2.2.0.js"></script>
        <script src="~/App/Scripts/App.js"></script>
        <script src="~/Scripts/wallpost.js"></script>

        @*<script>
            $(document).ready(function () {
                $("#status").click(function () {
                    var counting = parseInt($("#like").text());
                    var info = $(this).text();
                    if (info == 'like') {
                        counting++;
                        $("#like").text(counting);
                        $("#status").text("dislike");
                    }
                    else if (info == 'dislike') {
                        counting--;
                        $("#like").text(counting);
                        $("#status").text("like");
                    }

                });

            });
        </script>*@
    }
